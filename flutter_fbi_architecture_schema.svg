<svg width="1010" height="550" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Green arrow marker for upward flow (UI to Feature) -->
    <marker id="greenArrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#4CAF50"/>
    </marker>
    
    <!-- Blue arrow marker for responses -->
    <marker id="blueArrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#2196F3"/>
    </marker>
    
    <!-- Red arrow marker for downward flow (Feature to UI) -->
    <marker id="redArrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#FF5722"/>
    </marker>
    
    <!-- Orange arrow marker for side effects -->
    <marker id="orangeArrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#FF9800"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1010" height="550" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="505" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#333">Flutter FBI Architecture</text>
  <text x="505" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#666">One Widget â†’ One Binder Principle</text>
  
  <!-- UI Layer -->
  <g>
    <circle cx="125" cy="230" r="60" fill="#4FC3F7" stroke="#0277BD" stroke-width="3"/>
    <text x="125" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">Widget A</text>
    
    <circle cx="125" cy="420" r="60" fill="#4FC3F7" stroke="#0277BD" stroke-width="3"/>
    <text x="125" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">Widget B</text>
    
    <text x="125" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">User Interface Layer</text>
  </g>
  
  <!-- Binder Layer - Single Feature -->
  <g>
    <rect x="325" y="170" width="120" height="120" rx="10" fill="#66BB6A" stroke="#2E7D32" stroke-width="3"/>
    <text x="385" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">Feature</text>
    <text x="385" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">Binder</text>
    <text x="385" y="255" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">(1:1)</text>
    <text x="385" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">Single Feature Binding</text>
  </g>
  
  <!-- Binder Layer - Multi Feature -->
  <g>
    <rect x="325" y="360" width="120" height="120" rx="10" fill="#AB47BC" stroke="#6A1B9A" stroke-width="3"/>
    <text x="385" y="410" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">Multi</text>
    <text x="385" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">Feature</text>
    <text x="385" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">Binder</text>
    <text x="385" y="455" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">(1:N)</text>
    <text x="385" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">Multi Feature Binding</text>
  </g>
  
  <!-- Feature Layer -->
  <g>
    <!-- Feature 1 -->
    <rect x="575" y="165" width="100" height="80" rx="8" fill="#FF7043" stroke="#D84315" stroke-width="2"/>
    <text x="625" y="200" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Feature A</text>
    <text x="625" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Business Logic</text>
    
    <!-- Feature 2 -->
    <rect x="575" y="285" width="100" height="80" rx="8" fill="#FF7043" stroke="#D84315" stroke-width="2"/>
    <text x="625" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Feature B</text>
    <text x="625" y="335" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Business Logic</text>
    
    <!-- Feature 3 -->
    <rect x="575" y="405" width="100" height="80" rx="8" fill="#FF7043" stroke="#D84315" stroke-width="2"/>
    <text x="625" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Feature C</text>
    <text x="625" y="455" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Business Logic</text>
    
    <text x="625" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">Feature Layer</text>
  </g>
  
  <!-- Data Layer -->
  <g>
    <rect x="825" y="270" width="120" height="100" rx="10" fill="#42A5F5" stroke="#1565C0" stroke-width="3"/>
    <text x="885" y="315" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white">Data</text>
    <text x="885" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white">Sources</text>
    <text x="885" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">API / Repository Layer</text>
  </g>
  
  <!-- Arrows and Flow Lines -->
  
  <!-- Widget A to Feature Binder (Events) -->
  <path d="M 185 230 Q 255 230 325 230" stroke="#4CAF50" stroke-width="3" fill="none" marker-end="url(#greenArrow)"/>
  <text x="255" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#4CAF50" font-weight="bold">UI Events</text>
  
  <!-- Widget B to Multi Feature Binder (Events) -->
  <path d="M 185 420 Q 255 420 325 420" stroke="#4CAF50" stroke-width="3" fill="none" marker-end="url(#greenArrow)"/>
  <text x="255" y="435" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#4CAF50" font-weight="bold">UI Events</text>
  
  <!-- Feature Binder to Widget A (States) -->
  <path d="M 325 210 Q 255 210 185 210" stroke="#FF5722" stroke-width="3" fill="none" marker-end="url(#redArrow)"/>
  <text x="255" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#FF5722" font-weight="bold">UI States</text>
  
  <!-- Multi Feature Binder to Widget B (States) -->
  <path d="M 325 400 Q 255 400 185 400" stroke="#FF5722" stroke-width="3" fill="none" marker-end="url(#redArrow)"/>
  <text x="255" y="385" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#FF5722" font-weight="bold">UI States</text>
  
  <!-- Feature Binder to Feature A -->
  <path d="M 445 210 Q 510 190 575 205" stroke="#2196F3" stroke-width="2" fill="none" marker-end="url(#blueArrow)"/>
  <text x="510" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2196F3">Events</text>
  
  <!-- Feature A to Feature Binder -->
  <path d="M 575 225 Q 510 225 445 230" stroke="#FF9800" stroke-width="2" fill="none" marker-end="url(#orangeArrow)"/>
  <text x="510" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#FF9800">States</text>
  
  <!-- Multi Feature Binder to Features -->
  <path d="M 445 400 Q 510 370 575 325" stroke="#2196F3" stroke-width="2" fill="none" marker-end="url(#blueArrow)"/>
  <path d="M 445 420 Q 510 430 575 445" stroke="#2196F3" stroke-width="2" fill="none" marker-end="url(#blueArrow)"/>
  <text x="510" y="390" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2196F3">Events</text>
  
  <!-- Features to Multi Feature Binder -->
  <path d="M 575 345 Q 510 400 445 440" stroke="#FF9800" stroke-width="2" fill="none" marker-end="url(#orangeArrow)"/>
  <path d="M 575 465 Q 510 460 445 460" stroke="#FF9800" stroke-width="2" fill="none" marker-end="url(#orangeArrow)"/>
  <text x="510" y="470" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#FF9800">States</text>
  
  <!-- Features to Data Sources -->
  <path d="M 675 205 Q 750 240 825 290" stroke="#2196F3" stroke-width="2" fill="none" marker-end="url(#blueArrow)"/>
  <path d="M 675 325 Q 750 320 825 320" stroke="#2196F3" stroke-width="2" fill="none" marker-end="url(#blueArrow)"/>
  <path d="M 675 445 Q 750 400 825 350" stroke="#2196F3" stroke-width="2" fill="none" marker-end="url(#blueArrow)"/>
  <text x="750" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#2196F3">Requests</text>
  
  <!-- Data Sources to Features -->
  <path d="M 825 290 Q 750 260 675 225" stroke="#FF9800" stroke-width="2" fill="none" marker-end="url(#orangeArrow)"/>
  <path d="M 825 320 Q 750 340 675 345" stroke="#FF9800" stroke-width="2" fill="none" marker-end="url(#orangeArrow)"/>
  <path d="M 825 350 Q 750 420 675 465" stroke="#FF9800" stroke-width="2" fill="none" marker-end="url(#orangeArrow)"/>
  <text x="750" y="390" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#FF9800">Responses</text>

</svg>